# Plan 01-01: Analyze All 59 Pipelines

## Goal

Document the purpose, status, and categorization decision for each of the 59 pipeline files in `src/pipelines/`.

## Context

The repository has grown organically during research. 59 pipeline files exist but many are:
- Exploratory dead ends
- Superseded by better versions
- Utility/infrastructure (not experiment pipelines)
- Duplicates in `runpod_sync_*` directories

**Key Question for Each Pipeline**: "If we started on Llama-7B tomorrow with zero Mistral knowledge, would we need this code?"
- Yes to reproduce findings → canonical/
- Yes to discover circuit → discovery/
- No → archive/

## Prerequisites

- None (first phase)

## Tasks

### Task 1: Survey Pipeline Directory Structure
- [ ] List all files in `src/pipelines/` (excluding `__pycache__`)
- [ ] Identify subdirectories (`p10_advanced_steering/`, `sprint_head_specific_steering/`)
- [ ] Note files outside main directory (`boneyard/`, `runpod_sync_*/`)
- **Output**: Complete file inventory with paths

### Task 2: Analyze Infrastructure Files
- [ ] Analyze `registry.py` - experiment dispatch pattern
- [ ] Analyze `run.py` - CLI entry point
- [ ] Analyze `__init__.py` - exports
- **Decision**: These are infrastructure, not experiments (keep in place)

### Task 3: Analyze Canonical Pipeline Candidates (6 known)
Read and document each:
- [ ] `rv_l27_causal_validation.py` - L27 activation patching (strongest result)
- [ ] `confound_validation.py` - 4-pillar control validation
- [ ] `random_direction_control.py` - random direction baseline
- [ ] `mlp_ablation_necessity.py` - MLP necessity testing
- [ ] `mlp_sufficiency_test.py` - MLP sufficiency testing
- [ ] `mlp_combined_sufficiency_test.py` - combined MLP test

For each:
- Purpose (1-2 sentences)
- Key function/class names
- Config dependencies
- Result outputs
- BaselineMetricsSuite usage (yes/no)
- Statistical reporting (n, p, d, CI)

### Task 4: Analyze Discovery Pipeline Candidates
Read and document:
- [ ] `c2_rv_measurement.py` - C2 config geometry measurement
- [ ] `behavioral_grounding.py` - geometry→behavior bridge
- [ ] `behavioral_grounding_batch.py` - batch version
- [ ] `logit_lens_analysis.py` - logit lens integration
- [ ] `vproj_patching_analysis.py` - V_proj patching
- [ ] `head_ablation_validation.py` - head ablation
- [ ] `hysteresis.py` - temporal stability
- [ ] `temporal_stability.py` - related stability testing
- [ ] `eigenstate_direction_finder.py` - direction discovery
- [ ] `path_patching_mechanism.py` - path patching

### Task 5: Analyze Exploratory/Archive Candidates
Quick scan for dead ends:
- [ ] `kitchen_sink.py` - likely exploratory
- [ ] `phase0_*.py`, `phase1_*.py` - early phase experiments
- [ ] `steering*.py` files - steering experiments
- [ ] `l27_*.py` - L27 specific investigations
- [ ] `h31_*.py` - H31 investigations
- [ ] `anthropic_level_investigation.py` - exploratory
- [ ] `circuit_discovery.py` - early discovery
- [ ] `comprehensive_circuit_analysis.py` - comprehensive but exploratory
- [ ] All remaining files

### Task 6: Check Subdirectories
- [ ] `p10_advanced_steering/pipeline.py` - assess
- [ ] `sprint_head_specific_steering/pipeline.py` - assess

### Task 7: Identify Duplicates in runpod_sync_*
- [ ] Compare `runpod_sync_20260105_224717/src/pipelines/` with main
- [ ] Note any differences
- **Decision**: runpod_sync directories are deployment artifacts → exclude from categorization

### Task 8: Create Working Document
- [ ] Create `.planning/phases/01-pipeline-categorization/PIPELINE_ANALYSIS.md`
- [ ] Document each pipeline with:
  - File path
  - Purpose
  - Category decision (canonical/discovery/archive)
  - Rationale
  - Config dependencies
  - Notes

## Outputs

1. `.planning/phases/01-pipeline-categorization/PIPELINE_ANALYSIS.md` - detailed analysis
2. Summary counts: X canonical, Y discovery, Z archive

## Estimated Scope

- 59 pipeline files to analyze
- ~2-3 minutes per file for quick scan
- Deep dive on 6 canonical + 10 discovery candidates

## Success Criteria

- Every pipeline file has documented purpose
- Every pipeline has category decision with rationale
- No ambiguous "maybe" decisions - commit to category
